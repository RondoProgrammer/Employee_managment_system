{% extends 'base.html' %}
{% block title %}Edit Employee Â· EMS{% endblock %}
{% block content %}
  <h1 class="h4 mb-3">Edit Employee</h1>
  <div class="card p-3 shadow-sm">
    <!-- IMPORTANT: enctype for file uploads -->
    <form method="post" enctype="multipart/form-data" novalidate>
      {{ form.hidden_tag() }}

      <div class="row g-3">
        <div class="col-md-6">
          {{ form.name.label(class='form-label') }}
          {{ form.name(class='form-control') }}
          {% for e in form.name.errors %}<div class="text-danger small">{{ e }}</div>{% endfor %}
        </div>

        <div class="col-md-6">
          {{ form.position.label(class='form-label') }}
          {{ form.position(class='form-control') }}
          {% for e in form.position.errors %}<div class="text-danger small">{{ e }}</div>{% endfor %}
        </div>

        <div class="col-md-6">
          {{ form.salary.label(class='form-label') }}
          {{ form.salary(class='form-control', step='0.01') }}
          {% for e in form.salary.errors %}<div class="text-danger small">{{ e }}</div>{% endfor %}
        </div>

        <div class="col-md-6">
          {{ form.department_id.label(class='form-label') }}
          {{ form.department_id(class='form-select') }}
          {% for e in form.department_id.errors %}<div class="text-danger small">{{ e }}</div>{% endfor %}
        </div>

        <div class="col-12">
          {{ form.photo.label(class='form-label') }}
          {{ form.photo(class='form-control') }}
          <div class="form-text">Upload a new photo to replace the current one.</div>
          {% if employee.photo %}
            <div class="mt-2">
              <img src="{{ url_for('static', filename='uploads/' ~ employee.photo) }}"
                   alt="Current photo" class="img-thumbnail" style="max-width:180px; object-fit:cover;">
            </div>
          {% endif %}
          {% for e in form.photo.errors %}<div class="text-danger small">{{ e }}</div>{% endfor %}
        </div>
      </div>

      <div class="mt-3">
        {{ form.submit(class='btn btn-primary') }}
        <a href="{{ url_for('main.list_employees') }}" class="btn btn-link">Cancel</a>
      </div>
    </form>
  </div>
{% endblock %}
